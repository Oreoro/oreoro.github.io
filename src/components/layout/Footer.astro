---
import { getMenu } from "@/utils";
import { normalizeNavPath } from "@/lib/blog-helpers";
import SocialList from "@/components/ui/SocialList.astro";

const menuLinks = await getMenu();
const currentPath = normalizeNavPath(Astro.url.pathname);
---

<footer class="site-footer" id="main-footer">
	<div class="tech-footer-content">
		<nav aria-label="More on this site" class="footer-nav">
			{
				menuLinks.map((link, index) => (
					<>
						<a
							href={link.path}
							class="footer-link font-mono text-xs"
							aria-current={currentPath === normalizeNavPath(link.path) ? "page" : false}
						>
							{link.title}
						</a>
						{index < menuLinks.length - 1 && (
							<span class="footer-separator text-accent/30" aria-hidden="true">/</span>
						)}
					</>
				))
			}
		</nav>
		<div class="tech-footer-meta">
			<SocialList />
			<div class="tech-footer-terminal-prompt mt-4 sm:mt-0">
				<p class="tech-footer-copyright font-mono text-xs text-quote">
					<span class="tech-prompt-prefix text-accent/60">$</span>
					<span class="tech-prompt-text ml-1.5">© {new Date().getFullYear()} • Built with code</span>
					<span class="tech-prompt-cursor ml-1 inline-block w-0.5 h-3 bg-accent animate-pulse"></span>
				</p>
			</div>
		</div>
	</div>
</footer>
